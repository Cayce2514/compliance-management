-content_for :widget_title do
  %strong Transactions
  for this System

-content_for :widget_help, 'system_transactions'

-content_for :widget_id, 'system_transactions_id'

-content_for :widget_buttons do
  .filter
    .row-fluid
      .span12
        .pull-right
          %a.btn.btn-add{ :href => new_flow_transaction_path('transaction[system_id]' => system.id), :'data-toggle' => 'modal-ajax-form', :'data-modal-reset' => 'reset', :'data-form-target' => 'refresh', :title => 'Create New Transaction' }
            %i.grcicon-add-new
            New

.description
  %script(type='text/html' data-title='' data-description='')
    %li(data-id='<%= id %>' data-toggle='collapse' data-target='#transaction-<%= id %>')
      .slot.singlecontrolSlot
        .expander
        %a.widgetbtn.fltrt{ :href => flow_transactions_path + '/<%= id %>/edit', :'data-toggle' => 'modal-ajax-form', :'data-modal-reset' => 'reset', :'data-form-target' => 'refresh' }
          %i.grcicon-edit-grey
        %span.prefix <%= title %>
      .row-fluid-slotcontent.collapse{ :id => "transaction-<%= id %>" }
        .span13
          <%= description %>

  -transactions = system.transactions.all
  -if transactions.empty?
    %p Describe sets of transactions generated by this System or Process that an Auditor might audit.

  %ul.slugtree#transactionsList
    -transactions.each do |item|
      %li{:'data-toggle' => 'collapse', :'data-target' => "#transaction-#{item.id}", :'data-id' => item.id}
        .slot.singlecontrolSlot
          .expander
          %a.widgetbtn.fltrt{ :href => edit_flow_transaction_path(item), :'data-toggle' => 'modal-ajax-form', :'data-modal-reset' => 'reset', :'data-form-target' => 'refresh' }
            %i.grcicon-edit-grey
          %span.prefix=item.title
        .row-fluid-slotcontent.collapse{ :id => "transaction-#{item.id}" }
          .span13
            =display_as_html item.description
