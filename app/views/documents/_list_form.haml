-#content_for :modal_buttons do
  %input.ui-corner-all.widgetsearch{ :type => 'text', :placeholder => 'Search' }

-content_for :modal_title do
  %h1 Add Reference

.row-fluid
  .span6
    -#%h3 References for this object
    %h4
      Add Reference
      %a.widgetbtn.widgetbtnselector{ :href => new_flow_document_path, :'data-toggle' => 'modal-ajax-listnewform', :'data-list-target' => '.source, .target' }
        %i.gcmsicon-add
      .pull-right
        %input.widgetsearch{:type => "text", :placeholder => "Search References"}

    .filter-block
      .row-fluid
        .span12
          -#.modal-search.clearfix
            .btn-group.closed
              -#%a#filterButton.btn.dropdown-toggle{"data-toggle" => "dropdown"}
                GRC Directory
                %span.caret
              -#%ul.dropdown-menu
                %li
                  %a#showCompanyDirectory{:href => "#", :'data-toggle' => ''}
                    Company Directory
                %li
                  %a#showGRCDirectory{:href => "#", :'data-toggle' => ''}
                    GRC Directory

          -#.additional-filters.filter-group
            .row-fluid
              .span4
                %label Name
                %input.span12{:type=>"text", :placeholder => "enter name"}
              .span4
                %label Org. group
                %input.span12{:type=>"text", :placeholder => "example: IT"}
              .span4
                %label Title
                %input.span12{:type=>"text", :placeholder => "example: Compliance"}

          .tabbable.tabs-left
            .tab-content
              #category1.tab-pane.active
                .people-list.short
                  %script{ :type => 'text/html' }
                    %li{ :'data-id' => '<%= document.id %>', :'data-title' => '<%= document.title %>', :'data-link_url' => '<%= document.link_url %>', :'data-descriptor' => '<%= document.descriptor %>' }
                      .row-fluid
                        .span8
                          %span.company <%= document.link_url %>
                          %span.name <%= document.title %>
                        .span4.actions
                          %a.widgetbtn.pull-right.add-me{:href => "#", :'data-toggle' => 'selector-list-select'}
                            %i.grcicon-chevron-right
                          %a.widgetbtn.pull-right{:href => edit_flow_document_path('<%=document.id%>'), :'data-toggle' => 'modal-ajax-listeditform', :'data-list-target' => '' }
                            %i.gcmsicon-edit-grey
                      -#.arrowcontrols-group{ :'data-toggle' => 'list-select', :href => '#',  :'data-id' => '<%= document.id %>', :'data-context' => "{ title: '<%= document.title %>', link_url: '<%= document.link_url %>', descriptor: '<%= document.descriptor %>' }"}
                        .controls-type <%= document.link_url %>
                        .controls-subtype <%= document.descriptor %>
                        .controls-subgroup <%= document.title || '&nbsp;' %>

                  %ul.source{ :'data-list-data-href' => flow_documents_url }

    -#%script{ :type => 'text/html', :data => { :title => '', :link_url => '', :descriptor => '' }}
      %li.controlSlot{ :'data-id' => '<%= id %>' }
        %input(type='hidden' name='items[<%= id %>][id]' value='<%= id %>')
        %a{:href => "#", :'data-toggle' => 'list-remove'}
          .removeCircleButton.fltrt
            %i.gcmssmallicon-dash-white
        .arrowcontrols-group{ :href => '#', :'data-id' => '<%= id %>', :'data-context' => "{ title: '<%= title %>', link_url: '<%= link_url %>', descriptor: '<%= descriptor %>' }"}
          .controls-type <%= link_url %>
          .controls-subtype <%= descriptor %>
          .controls-subgroup <%= title || '&nbsp;' %>

    -#%ul.itemlist#listObjectDocumentList
      -object.object_documents.each do |object_document|
        -document = object_document.document
        %li.controlSlot{ :'data-id' => document.id, :class => member_error_class(object_document) }
          =member_error_messages_inline(object_document)
          %input(type='hidden' name="items[#{document.id}][id]" value="#{document.id}")
          %a{:href => "#", :'data-toggle' => 'list-remove'}
            .removeCircleButton.fltrt
              %i.gcmssmallicon-dash-white
          .arrowcontrols-group{ :href => '#', :'data-id' => document.id, :'data-context' => { :title => document.title, :link_url => document.link_url }.to_json}
            .controls-type=document.link_url
            .controls-subgroup=document.title || '&nbsp;'.html_safe

  .span6
    -#%h3
      Select a reference to add
      %a.btn.btn-blue.addbtn.fltrt{ :href => new_flow_document_path, :'data-toggle' => 'modal-ajax-listnewform', :'data-list-target' => '#listDocumentList, #listObjectDocumentList' }
        New Reference

    %h4
      Associated References

    .people-list.currentlist
      %script{ :type => 'text/html' }
        %li{ :'data-id' => '<%= document.id %>' }
          .row-fluid
            .span6
              %span.company <%= document.link_url || document.descriptor %>
              %span.name <%= document.title %>
            .span6.actions
              %input{ :type => 'hidden', :name => 'items[<%= document.id %>][id]', :value => '<%= document.id %>' }
              %a.widgetbtn.pull-right{ :href => '#', :'data-toggle' => 'selector-list-remove' }
                %i.icon-minus-sign
              %a.widgetbtn.pull-right{ :href => edit_flow_document_path('<%=document.id%>'), :'data-toggle' => 'modal-ajax-listeditform', :'data-list-target' => '' }
                %i.gcmsicon-edit-grey
          -#.arrowcontrols-group{ :'data-toggle' => 'list-select', :href => '#',  :'data-id' => '<%= document.id %>', :'data-context' => "{ title: '<%= document.title %>', link_url: '<%= document.link_url %>', descriptor: '<%= document.descriptor %>' }"}
            .controls-type <%= document.link_url %>
            .controls-subtype <%= document.descriptor %>
            .controls-subgroup <%= document.title || '&nbsp;' %>

      %ul.target{ :'data-list-data-href' => flow_object_documents_path(:object_type => object.class.name, :object_id => object.id) }

    -#%script{ :type => 'text/html' }
      %li.controlSlot{ :'data-id' => '<%= id %>' }
        .itemarrow
        .arrowcontrols-group{ :'data-toggle' => 'list-select', :href => '#',  :'data-id' => '<%= id %>', :'data-context' => "{ title: '<%= title %>', link_url: '<%= link_url %>', descriptor: '<%= descriptor %>' }"}
          .controls-type <%= link_url %>
          .controls-subtype <%= descriptor %>
          .controls-subgroup <%= title || '&nbsp;' %>

    -#%ul.itemlist#listDocumentList{ :'data-list-href' => list_flow_documents_path(:format => 'json'), :'data-list-target' => '#listObjectDocumentList'}
      -options.each do |document|
        %li.controlSlot{ :'data-id' => document.id }
          .itemarrow
          .arrowcontrols-group{ :'data-toggle' => 'list-select', :href => '#', :'data-id' => document.id, :'data-context' => { :title => document.title, :link_url => document.link_url }.to_json}
            .controls-type=document.link_url
            .controls-subgroup=document.title || '&nbsp;'.html_safe
